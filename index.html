<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Tích Điểm - Ông Kòi</title>
  
  <!-- Thư viện ngoài -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css">
  
  <!-- CSS của bạn -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Vùng chứa thông báo -->
  <div id="toast-container"></div>

  <main>
    <!-- Màn hình đăng nhập -->
    <section id="loginScreen" class="login-box">
      <header>
        <h2>🔒 Đăng nhập quản lý</h2>
      </header>
      <input type="password" id="password" placeholder="Nhập mật khẩu quản lý" />
      <button id="loginButton">Đăng nhập</button>
      <p id="loginError" class="error-message"></p>
    </section>

    <!-- Màn hình chính -->
    <section id="mainScreen" style="display:none;">
      <header>
        <h1>👨‍🍳 Quản lý tích điểm - Bánh Mì Ông Kòi</h1>
      </header>

      <div class="container">
        <!-- Vùng tạo QR Code -->
        <div class="qr-generator-box">
          <h2>📲 Tạo và Hiển thị mã QR</h2>
          <button id="taoMaQRButton">Tạo mã QR mới</button>
          <canvas id="qrCanvas"></canvas>
          <div id="qrCodeInfo" class="code-display" style="display:none;">
            <p><strong>Mã:</strong> <span id="maQRcode" data-full-link=""></span></p>
            <button id="copyLinkQRButton">📋 Sao chép link</button>
          </div>
        </div>

        <!-- Vùng dữ liệu -->
        <div class="data-box">
          <div class="filter-box">
            <input type="search" id="searchPhone" placeholder="🔎 Tìm theo SĐT" />
            <input type="date" id="startDate" />
            <input type="date" id="endDate" />
            <button id="filterButton">Lọc</button>
            <button id="resetButton">Hiện tất cả</button>
          </div>

          <div class="data-header">
            <h2 id="rankingTitle">🏆 Bảng xếp hạng</h2>
            <button id="refreshButton" class="button-icon" title="Làm mới dữ liệu">🔄</button>
          </div>
          <div class="table-responsive">
            <table id="rankingTable">
              <thead>
                <tr><th>Hạng</th><th>Số điện thoại</th><th>Lượt</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          
          <hr>

          <h2>📋 Lịch sử tích điểm</h2>
          <button id="exportButton">📥 Xuất Excel</button>
          <div class="table-responsive">
            <table id="dataTable">
              <thead>
                <tr><th>Số điện thoại</th><th>Thời gian</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Cửa sổ xem chi tiết lịch sử -->
  <div id="historyModal" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <h2 id="modalTitle">Lịch sử tích điểm</h2>
      <div class="table-responsive">
        <table id="modalHistoryTable">
          <thead><tr><th>Thời gian</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Thư viện ngoài -->
  <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  
  <!-- JavaScript của bạn -->
  <script src="script.js"></script>
</body>
</html>
